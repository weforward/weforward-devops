(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b52f176"],{7666:function(t,e,s){},"79c7":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flexlayout",staticStyle:{height:"100vh"}},[s("div",{staticClass:"debug-content wt-scroll"},[s("div",{staticClass:"input-box flexlayout"},[s("div",{staticClass:"input-box-title"},[t._v("服务名：")]),s("div",{staticClass:"input-box-content"},[s("SingleSelect",{attrs:{items:t.serviceList,selectname:t.serviceName},on:{select:t.choseOne},model:{value:t.serviceName,callback:function(e){t.serviceName=e},expression:"serviceName"}})],1)]),s("div",{staticClass:"input-box flexlayout"},[s("div",{staticClass:"input-box-title"},[t._v("服务编号：")]),s("div",{staticClass:"input-box-content"},[s("SingleSelect",{attrs:{items:t.serviceNoList,selectname:t.serviceNo},model:{value:t.serviceNo,callback:function(e){t.serviceNo=e},expression:"serviceNo"}})],1)]),s("div",{staticClass:"input-box flexlayout"},[s("div",{staticClass:"input-box-title"},[t._v("脚本名(与脚本源码二选一)：")]),s("div",{staticClass:"input-box-content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.scriptName,expression:"scriptName"}],staticClass:"inputtext",staticStyle:{width:"180px"},attrs:{placeholder:"如:_VersionScript,_LogScript"},domProps:{value:t.scriptName},on:{input:function(e){e.target.composing||(t.scriptName=e.target.value)}}}),s("div",{staticClass:"query_button",on:{click:function(e){return t.quickDebug("vs")}}},[t._v("Version")]),s("div",{staticClass:"query_button",on:{click:function(e){return t.quickDebug("ls")}}},[t._v("Log")])])]),s("div",{staticClass:"input-box flexlayout"},[s("div",{staticClass:"input-box-title"},[t._v("脚本源码(与脚本名二选一)：")]),s("div",{staticClass:"input-box-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.scriptSource,expression:"scriptSource"}],attrs:{cols:"45",rows:"15",placeholder:"格式要求:必须是WeforwardScript的实现类"},domProps:{value:t.scriptSource},on:{input:function(e){e.target.composing||(t.scriptSource=e.target.value)}}})])]),s("div",{staticClass:"input-box flexlayout"},[s("div",{staticClass:"input-box-title"},[t._v("脚本参数：")]),s("div",{staticClass:"input-box-content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.scriptArgs,expression:"scriptArgs"}],staticClass:"inputtext",staticStyle:{width:"330px"},attrs:{placeholder:"a=111&b=222"},domProps:{value:t.scriptArgs},on:{input:function(e){e.target.composing||(t.scriptArgs=e.target.value)}}})])]),s("div",{staticClass:"btn-box"},[s("button",{staticClass:"add-btn",staticStyle:{width:"400%"},on:{click:t.debug}},[s("span",[t._v("执 行 调 试")])])])]),s("div",{staticClass:"debug-result wt-scroll"},[s("div",{staticClass:"input-box-title",staticStyle:{"text-align":"left","margin-top":"20px","margin-bottom":"10px"}},[t._v("调试结果：")]),s("div",{staticClass:"input-box-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.result,expression:"result"}],attrs:{cols:"60",rows:"25"},domProps:{value:t.result},on:{input:function(e){e.target.composing||(t.result=e.target.value)}}})]),t.warnningMsg?s("div",{staticClass:"warnning-msg"},[t._v(t._s(t.warnningMsg))]):t._e()])])},n=[],c=s("2909"),a=(s("ac6a"),{name:"debug",components:{SingleSelect:function(){return s.e("chunk-90e745ba").then(s.bind(null,"4e15"))}},data:function(){return{serviceName:"",serviceNo:"",scriptName:"",scriptSource:"",scriptArgs:"",warnningMsg:"",result:"",serviceList:[],current:1,serviceNoList:[]}},methods:{debug:function(){var t=this;if(this.serviceName)if(this.serviceNo)if(this.scriptName||this.scriptSource){this.$route.query.sn&&this.$route.query.no&&this.$router.push({name:"服务调试",query:{sn:this.serviceName,no:this.serviceNo}}),this.warnningMsg="";var e=this.$wool.showloading("加载中..."),s={serviceName:this.serviceName,serviceNo:this.serviceNo,scriptName:this.scriptName,scriptSource:this.scriptSource,scriptArgs:this.scriptArgs},i="devops?method=/devops/debug/service";this.$wf.post(i,s).then((function(s){e.hide(),t.result=JSON.stringify(s,null,10)})).catch((function(s){e.hide(),t.warnningMsg=s.message}))}else this.warnningMsg="脚本名和脚本源码不能为空!";else this.warnningMsg="服务编号不能为空!";else this.warnningMsg="服务名不能为空!"},getServiceList:function(){var t=this,e={page:this.current,page_size:10};this.$wf.post("devops?method=/devops/gateway/service_names",e).then((function(e){e.pos<0||(e.items.forEach((function(e){t.serviceList=[].concat(Object(c["a"])(t.serviceList),[{name:e,id:e}])})),t.current=t.current+1,t.getServiceList())})).catch((function(e){t.$wool.showwarn(e)}))},choseOne:function(t){var e=this;this.serviceNoList=[],this.$wf.post("?method=/devops/gateway/service_details",{name:t}).then((function(t){t.forEach((function(t){e.serviceNoList=[].concat(Object(c["a"])(e.serviceNoList),[{name:t.no,id:t.no}])}))})).catch((function(t){e.$wf.showwarn(t)}))},quickDebug:function(t){"vs"==t?this.scriptName="_VersionScript":"ls"==t&&(this.scriptName="_LogScript"),this.debug()}},mounted:function(){this.getServiceList(),null!=this.$route.query&&(this.serviceName=this.$route.query.sn,this.serviceNo=this.$route.query.no)}}),r=a,o=(s("b153"),s("2877")),u=Object(o["a"])(r,i,n,!1,null,"79eeb2e8",null);e["default"]=u.exports},b153:function(t,e,s){"use strict";var i=s("7666"),n=s.n(i);n.a}}]);