(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78b9df43"],{"00fc":function(t,e,s){"use strict";s("0fbe")},"0fbe":function(t,e,s){},6855:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project_area"},[s("div",{staticClass:"query"},[s("div",{staticClass:"query_input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.page.keywords,expression:"page.keywords"}],attrs:{type:"text"},domProps:{value:t.page.keywords},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getGroupList(e)},input:function(e){e.target.composing||t.$set(t.page,"keywords",e.target.value)}}}),s("div",{staticClass:"query_button",on:{click:t.getGroupList}},[t._v("\n          查询\n        ")])]),s("div",{staticClass:"query_group"},[s("div",{staticClass:"query_select"},[t._v("\n          运维组："),s("SingleSelect",{attrs:{items:t.groupName},on:{select:t.selectByGroup}})],1),s("div",{staticClass:"add_button",on:{click:function(e){t.showAddGroup=!0}}},[t._v("\n          +添加\n        ")])])]),s("table",{staticClass:"project_table"},[t._m(0),t.noData?t._e():s("tbody",t._l(t.groupList,(function(e,o){return s("tr",{key:o},[s("td",[e.id?s("span",{attrs:{title:e.id}},[t._v(t._s(e.id))]):s("span",[t._v("--")])]),s("td",[e.name?s("span",{attrs:{title:e.name}},[t._v(t._s(e.name))]):s("span",[t._v("--")])]),s("td",[t._l(e.users,(function(o,n){return 0!=e.users.length?s("span",{key:n},[t._v("\n                "+t._s(o.name)+"("+t._s(o.loginname)+");\n              ")]):t._e()})),0==e.users.length?s("span",[t._v("--")]):t._e()],2),s("td",{staticClass:"caozuo_td"},[0!=e.users.length?s("span",{staticStyle:{"margin-right":"10px"},on:{click:function(s){return t.operateUser("remove",e)}}},[t._v("移除用户")]):t._e(),s("span",{on:{click:function(s){return t.operateUser("add",e)}}},[t._v("添加用户")])])])})),0),t.noData?s("tr",{staticClass:"noData"},[s("td",{attrs:{colspan:"4"}},[t._v("暂无数据")])]):t._e()]),t.noData?t._e():s("PagerBar",{staticStyle:{"margin-bottom":"2%"},attrs:{page:t.page},on:{change:t.searchByPage}}),s("UserList",{ref:"userList",attrs:{isshow:t.showUser,users:t.selectUserList,op:t.userOp,id:t.selectGroupId},on:{toggle:t.toggleUser}}),s("WoolShowmodal",{attrs:{isshow:t.showAddGroup,isshowcloser:!0},on:{tapCloser:function(e){t.showAddGroup=!1}}},[s("div",{staticClass:"add_group"},[s("div",{staticClass:"titlebar flexlayout"},[s("span",[t._v("添加项目")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.addGroupName,expression:"addGroupName"}],attrs:{type:"text",placeholder:"请输入运维组名称"},domProps:{value:t.addGroupName},on:{input:function(e){e.target.composing||(t.addGroupName=e.target.value)}}}),s("div",{staticClass:"add_button",on:{click:t.saveGroup}},[t._v("保存")])])])],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"project_title"},[s("td",{staticStyle:{width:"25%"}},[t._v("运维组id")]),s("td",{staticStyle:{width:"10%"}},[t._v("运维组名")]),s("td",{staticStyle:{width:"25%"}},[t._v("用户")]),s("td",{staticStyle:{width:"25%"}},[t._v("操作")])])}],a={data:function(){return{page:{current:1,pagecount:1,totalCount:0,pagesize:10,keywords:""},noData:!1,groupList:[],groupName:[],groupid:"",showCreate:!1,showUser:!1,selectUserList:[],userOp:"",selectGroupId:"",showAddGroup:!1,addGroupName:""}},methods:{getGroupList:function(){var t=this,e={page:this.page.current,page_size:this.page.pagesize,keywords:this.page.keywords,groupid:this.groupid};this.$wf.post("devops?method=/devops/system/groups",e).then((function(e){console.log(e),0==e.items.length?t.noData=!0:(t.noData=!1,t.groupList=e.items,t.page.current=e.page,t.page.pagecount=e.page_count,t.page.totalCount=e.count)})).catch((function(e){t.$wool.showwarn(e)}))},searchByPage:function(t){this.page.current=t.page,this.getGroupList()},getSelectGroupList:function(){var t=this;this.$wf.post("devops?method=/devops/home/groups").then((function(e){t.groupName=e.items}))},selectByGroup:function(t){this.groupid=t,this.getGroupList()},operateUser:function(t,e){var s=this;this.selectUserList="remove"==t?e.users:[],this.selectGroupId=e.id,this.userOp=t,this.showUser=!this.showUser,this.$nextTick((function(){s.$refs.userList.getOp(t)}))},toggleUser:function(){this.showUser=!this.showUser,this.getGroupList()},saveGroup:function(){var t=this;if(this.msgView=this.$wool.showloading("创建中"),""==this.addGroupName)return this.msgView.hide(),void this.$wool.showwarn("请输入群组名");var e={op:"add",name:this.addGroupName},s="?method=/devops/system/group";this.$wf.post(s,e).then((function(e){e.id?(t.msgView.msgsucc("创建成功").hide(),t.getGroupList()):t.$wf.showwarn("创建失败")})).catch((function(e){return t.$wool.showerror(e.message)}))}},mounted:function(){this.getGroupList(),this.getSelectGroupList()},components:{PagerBar:function(){return s.e("chunk-22e86add").then(s.bind(null,"2f3e"))},SingleSelect:function(){return s.e("chunk-90e745ba").then(s.bind(null,"4e15"))},UserList:function(){return s.e("chunk-8fb3d416").then(s.bind(null,"6f19"))},WoolShowmodal:function(){return s.e("chunk-41c82f40").then(s.bind(null,"59c5"))}}},r=a,i=(s("00fc"),s("2877")),u=Object(i["a"])(r,o,n,!1,null,"6eded1c0",null);e["default"]=u.exports}}]);